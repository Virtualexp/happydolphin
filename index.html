<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>welcome!</title>

<style>
  body {
    background-image: url('waves.jpg');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    color: #40FFB0;
    font-family: "VT323", monospace;
    height: 100vh;
    margin: 0;
    overflow: hidden;
  }

  body::after {
    content: "";
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background-color: rgba(0, 0, 20, 0.35);
    pointer-events: none;
  }

  body::before {
    content: "";
    position: fixed;
    inset: 0;
    background: repeating-linear-gradient(
      to bottom,
      rgba(64, 255, 176, 0.05),
      rgba(64, 255, 176, 0.05) 2px,
      transparent 2px,
      transparent 4px
    );
    pointer-events: none;
    mix-blend-mode: overlay;
  }

  .center-content {
    position: absolute;
    top: 8%; /* daha yukarı çıkarır (20% idi) */
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
    text-align: center;
    z-index: 1;
  }


  h1 {
    position: relative;
    top: -40px;
    font-size: 48px;
    color: #7CFFB2;
    text-shadow:
      0 0 8px #40FFB0,
      0 0 15px rgba(64,255,176,0.5);
    margin: 0;
    letter-spacing: 2px;
  }

  .profile {
    width: 340px;
    height: 340px;
    border: 2px solid #40FFB0;
    border-radius: 50%;
    background-image: url('dolphin.jpg');
    background-size: cover;
    background-position: center;
    box-shadow: 0 0 25px #40FFB0;
  }

  .win98 {
    position: absolute;
    width: 320px;
    height: 190px;
    background-color: #c0c0c0;
    color: black;
    font-family: "MS Sans Serif", sans-serif;
    border: none;
    box-shadow:
      inset 1px 1px 0 #ffffff,
      inset -1px -1px 0 #808080,
      1px 1px 0 #404040;
    user-select: none;
    z-index: 999;
    touch-action: none;
  }

  .title-bar {
    background: linear-gradient(to right, #000080, #1084d0);
    color: white;
    padding: 3px 6px;
    font-weight: bold;
    font-size: 14px;
    cursor: move;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .close-ind {
    width: 20px;
    height: 20px;
    background-color: #c0c0c0;
    border: 2px solid #808080;
    box-shadow: inset -1px -1px #fff, inset 1px 1px #404040;
    color: black;
    font-size: 15px;
    text-align: center;
    line-height: 16px;
    font-weight: bold;
    cursor: pointer;
    margin-left: 6px;
  }

  .content {
    position: relative; /* sabitleme için eklendi */
    height: calc(100% - 26px);
    background-color: #d4d0c8;
    border-top: 2px solid #808080;
    border-left: 2px solid #808080;
    border-right: 2px solid #ffffff;
    border-bottom: 2px solid #ffffff;
    padding: 16px 20px;
  }

  .message {
    display: flex;
    align-items: flex-start;
    gap: 12px;
  }

  .message-icon {
    width: 66px;
    height: 66px;
  }

  .message-text {
    text-align: left;
    line-height: 1.6;
    font-size: 24px;
  }

  .button-container {
    position: absolute;
    bottom: 10px;
    right: 10px;
    margin: 0; /* ekstra boşluk olmasın */
  }

  .button {
    background-color: #c0c0c0;
    border: 2px solid #808080;
    box-shadow: inset -1px -1px #fff, inset 1px 1px #404040;
    padding: 6px 18px;
    cursor: pointer;
    font-size: 14px;
  }

  .trail {
    position: absolute;
    pointer-events: none;
    opacity: 1;
    transition: opacity 0.15s linear;
  }
</style>
</head>

<body>
  <div class="center-content">
    <h1>totaly not a virus, trust me..</h1>
    <div class="profile"></div>
  </div>

<script>
let clickCount = 0, zCounter = 1000, windowIndex = 0;
const MAX_WINDOWS = 7, OFFSET_X = 30, OFFSET_Y = 30;

const seaSound = new Audio('underwatersound.mp3');
seaSound.loop = true; seaSound.volume = 0.5;
const dolphinSound = new Audio('dolphinsound.mp3');
dolphinSound.volume = 0.5;

window.addEventListener('click', function initSound() {
  seaSound.play().catch(()=>{});
  window.removeEventListener('click', initSound);
});

const messages = [
  "so, are you sure you want to click this button?",
  "hmm... interesting choice.",
  "you really thought this was the last one?",
  "don’t trust the dolphin.",
  "the ocean is watching.",
  "trust issues detected.",
  "maybe... stop?",
  "i’m starting to think you like chaos."
];

function createWindow(x, y) {
  windowIndex++;
  const win = document.createElement('div');
  win.className = 'win98';
  win.style.left = (x ?? 100) + 'px';
  win.style.top = (y ?? 100) + 'px';
  win.style.zIndex = ++zCounter;

  // Mod seçimi (%10 terminal, %5 runaway)
  const chance = Math.random();
  let mode = "normal";
  if (chance < 0.10) mode = "terminal";
  else if (chance < 0.15) mode = "runaway";

  const randomMessage = messages[Math.floor(Math.random() * messages.length)];

  let html = "";
  if (mode === "terminal") {
    html = `
      <div class="title-bar">
        <span>Deep Sea Protocol</span>
        <div class="close-ind">X</div>
      </div>
      <div class="content">
        <div class="message-text">> access marine archive...</div>
        <input type="text" class="cmd-input" placeholder="type command..." style="
          width:100%;margin-top:10px;background:#000;color:#40FFB0;
          font-family:'VT323', monospace;font-size:20px;padding:4px;
          border:none;outline:none;">
        <div class="button-container"><button class="button">Execute</button></div>
      </div>`;
  } else {
    html = `
      <div class="title-bar">
        <span>OceanOS</span>
        <div class="close-ind">X</div>
      </div>
      <div class="content">
        <div class="message">
          <img src="dolphinmini.png" class="message-icon" alt="icon">
          <div class="message-text">${randomMessage}</div>
        </div>
        <div class="button-container"><button class="button">Yes, but</button></div>
      </div>`;
  }

  win.innerHTML = html;
  document.body.appendChild(win);
  dolphinSound.currentTime = 0; dolphinSound.play().catch(()=>{});

  win.querySelector('.close-ind').addEventListener('click', e => {
    e.stopPropagation();
    alert("sorry but answer the question first ¯\\_(ツ)_/¯");
  });

  if (mode === "terminal") setupTerminal(win);
  else if (mode === "runaway") setupRunaway(win);
  else setupNormal(win);

  makeDraggable(win, win.querySelector('.title-bar'));
}

function setupNormal(win) {
  const btn = win.querySelector('.button');
  btn.addEventListener('click', () => {
    clickCount++;
    const rect = win.getBoundingClientRect();
    win.remove();
    if (clickCount < MAX_WINDOWS) createWindow(rect.left + OFFSET_X, rect.top + OFFSET_Y);
    else window.location.href = "https://www.youtube.com/watch?v=WQO-aOdJLiw";
  });
}

function setupRunaway(win) {
  const btn = win.querySelector('.button');
  win.style.transition = 'left 0.25s ease-out, top 0.25s ease-out';
  win.addEventListener('mousemove', (e) => {
    const rect = btn.getBoundingClientRect();
    const dist = Math.hypot(e.clientX - (rect.left + rect.width/2), e.clientY - (rect.top + rect.height/2));
    if (dist < 80) {
      let newLeft = parseInt(win.style.left) + (Math.random() * 100 - 50);
      let newTop = parseInt(win.style.top) + (Math.random() * 100 - 50);
      newLeft = Math.max(0, Math.min(window.innerWidth - win.offsetWidth, newLeft));
      newTop = Math.max(0, Math.min(window.innerHeight - win.offsetHeight, newTop));
      win.style.left = newLeft + 'px';
      win.style.top = newTop + 'px';
    }
  });
}

function setupTerminal(win) {
  const input = win.querySelector('.cmd-input');
  const btn = win.querySelector('.button');
  const output = win.querySelector('.message-text');
  const qset = [
    { q: "do you think reality cares about you?", yes: "> then you’ve mistaken coincidence for affection.", no: "> reality doesn’t care, and that’s freedom." },
    { q: "would you erase your memories if you could?", yes: "> and lose what made you you?", no: "> so you choose the weight over the void." },
    { q: "is the truth worth the pain?", yes: "> brave. but truth doesn't love you back.", no: "> then maybe illusion is your chosen oxygen." },
    { q: "if no one remembers you, do you still exist?", yes: "> memories are waves. they fade, but the ocean stays.", no: "> then perhaps you never did." },
    { q: "are you alone?", yes: "> aren't we all?", no: "> yes you're" }
  ];
  const chosen = qset[Math.floor(Math.random() * qset.length)];
  typeText(output, "> " + chosen.q);
  let answered = false;

  btn.addEventListener('click', runCmd);
  input.addEventListener('keydown', e => { if (e.key === 'Enter') runCmd(); });

  function runCmd() {
    const cmd = input.value.trim().toLowerCase();
    input.value = "";
    if (!answered) {
      if (cmd === "yes" || cmd === "no") {
        answered = true;
        input.style.display = 'none';
        btn.style.display = 'none';
        typeText(output, chosen[cmd]);
        chainDolphinSounds();
        setTimeout(() => {
          if (Math.random() < 0.5) document.querySelectorAll('.win98').forEach(e => e.remove());
          else win.remove();
          clickCount = 0;
          centerWindow();
        }, 3000);
      } else output.textContent = "> answer with 'yes' or 'no'.";
    }
  }
}

function typeText(el, text, delay=25) {
  el.textContent = "";
  let i = 0;
  const interval = setInterval(() => {
    el.textContent += text[i++];
    if (i >= text.length) clearInterval(interval);
  }, delay);
}

function chainDolphinSounds() {
  for (let i = 0; i < 7; i++) {
    setTimeout(() => {
      const s = dolphinSound.cloneNode();
      s.volume = 0.4 - i * 0.05;
      s.play().catch(()=>{});
    }, i * 400);
  }
}

function makeDraggable(win, handle) {
  let offsetX = 0, offsetY = 0, isDragging = false;
  let lastTrail = 0;

  handle.addEventListener('pointerdown', e => {
    isDragging = true;
    offsetX = e.clientX - win.offsetLeft;
    offsetY = e.clientY - win.offsetTop;
    handle.setPointerCapture(e.pointerId);
  });

  handle.addEventListener('pointerup', e => {
    isDragging = false;
    handle.releasePointerCapture(e.pointerId);
  });

  handle.addEventListener('pointermove', e => {
    if (!isDragging) return;
    const x = e.clientX - offsetX;
    const y = e.clientY - offsetY;
    win.style.left = x + 'px';
    win.style.top = y + 'px';

    const now = Date.now();
    if (now - lastTrail > 25) {
      lastTrail = now;
      const trail = win.cloneNode(true);
      trail.classList.add('trail');
      trail.style.left = x + 'px';
      trail.style.top = y + 'px';
      trail.style.zIndex = 0;
      document.body.appendChild(trail);
      setTimeout(() => (trail.style.opacity = '0'), 50);
      setTimeout(() => trail.remove(), 200);
    }
  });
}

function centerWindow() {
  createWindow(
    (window.innerWidth - 320) / 2,
    (window.innerHeight - 190) / 2 + 100  // pencereyi daha aşağı başlat
  );
}
centerWindow();
</script>
</body>
</html>
